<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Rock, Paper, Scissors!</title>
    </head>
    <body class="body">
        <div class="choice-container">
            <button id="rock" class="choice">Rock</button>
            <button id="paper" class="choice">Paper</button>
            <button id="scissors" class="choice">Scissors</button>
        </div>
        <script class="script">
            // A function called getComputerChoice that returns either "Rock", "Paper", or "Scissors" randomly for the CPU.
            function getComputerChoice() {
                const choice = ["Rock", "Paper", "Scissors"]
                return choice[Math.floor(Math.random() * choice.length)];
            }

            const body = document.querySelector('.body');
            const result = document.createElement('p');
            const roundEnd = document.createElement('p');
            const script = document.querySelector('.script');

            const restart = document.createElement('button');
            restart.textContent = "Restart";

            const choiceWrap = document.querySelector('.choice-container');
            function removeChoice() {
                let choice = choiceWrap.lastElementChild;
                while (choice) {
                    choiceWrap.removeChild(choice);
                    choice = choiceWrap.lastElementChild;
                };
                body.insertBefore(restart, result);
            };
            body.insertBefore(result, script);
            body.insertBefore(roundEnd, script);

            // A function that plays a single round of the game. The function includes two parameters that indicate the player's and CPU's input. The function returns the result of the round in a string.
            let player = 0;
            let computer = 0;

            function playRound(playerSelection, 
            computerSelection = getComputerChoice()) {
                if (player === 5 || computer === 5) {
                    player = 0;
                    computer = 0;
                    roundEnd.textContent = "";
                }
                switch (playerSelection) {
                    case computerSelection:
                        result.textContent = "It's a tie!";
                        break;
                    case "Rock":
                        if (computerSelection === "Scissors") {
                            ++player;
                            result.textContent = `Your Rock overpowers the CPU's Scissors!
                            ${player} vs ${computer}`;
                            break;
                        } else {
                            ++computer;
                            result.textContent = `The CPU's Paper destroys your Rock... 
                            ${player} vs ${computer}`;
                            break;
                        };
                    case "Paper":
                        if (computerSelection === "Rock") {
                            ++player;
                            result.textContent = `Your Paper overpowers the CPU's Rock!
                            ${player} vs ${computer}`;
                            break;
                        } else {
                            ++computer;
                            result.textContent = `The CPU's Scissors destroys your Paper...
                            ${player} vs ${computer}`;
                            break;
                        };
                    case "Scissors":
                        if (computerSelection === "Paper") {
                            ++player;
                            result.textContent = `Your Scissors overpowers the CPU's Paper!
                            ${player} vs ${computer}`;
                            break;
                        } else {
                            ++computer;
                            result.textContent = `The CPU's Rock destroys your Scissors...
                            ${player} vs ${computer}`;
                            break;
                        };
                    default:
                        result.textContent = "Invalid word. Please type the appropriate word.";
                };
                if (player === 5) {
                    roundEnd.textContent = `You are the winner!`;
                    removeChoice();
                    } else if (computer === 5) {
                    roundEnd.textContent = `Better luck next time...`;
                    removeChoice();
                };
            };



            const rock = document.querySelector('#rock');
            rock.addEventListener('click', (e) => {
                playRound("Rock");
            });
            const paper = document.querySelector('#paper');
            paper.addEventListener('click', (e) => {
                playRound("Paper");
            });
            const scissors = document.querySelector('#scissors');
            scissors.addEventListener('click', (e) => {
                playRound("Scissors");
            });

            
        </script>
    </body>
</html>